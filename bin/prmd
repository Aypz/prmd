#!/usr/bin/env ruby

require 'prmd'

command = ARGV[0]

def directory
  if File.directory?(ARGV[1])
    ARGV[1]
  end
end

def schema
  if File.exists?(ARGV[1])
    JSON.parse(File.read(ARGV[1]))
  else
    {}
  end
end

command = ARGV[0]

case command
when 'combine'
  Prmd.combine(directory)
when 'doc'
  Prmd.doc(directory)
when 'init'
  Prmd.init(ARGV[1], ARGV[2])
when 'verify'
  Prmd.verify(schema)
end
