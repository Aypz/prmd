#!/usr/bin/env ruby

require(File.expand_path(File.join(File.dirname(__FILE__), '..', 'lib', 'prmd')))

case ARGV[0]
when 'combine'
  Prmd.combine(ARGV[1])
when 'doc'
  Prmd.doc(ARGV[1])
when 'init'
  Prmd.init(ARGV[1], ARGV[2])
when 'verify'
  if File.directory?(ARGV[1])
    Dir.glob(File.join(ARGV[1], '**/*.json')).each do |path|
      puts(path)
      Prmd.verify(JSON.parse(File.read(path)))
      puts
    end
  else
    Prmd.verify(
      JSON.parse(File.read(ARGV[1]))
    )
  end
end
